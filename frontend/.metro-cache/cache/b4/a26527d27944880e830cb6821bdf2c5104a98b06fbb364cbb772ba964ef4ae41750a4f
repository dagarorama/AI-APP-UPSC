{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":49,"index":153}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../services/apiClient","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":195},"end":{"line":5,"column":50,"index":245}}],"key":"d/HXpukAiWkGTCYty91WRV0J1/M=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _servicesApiClient = require(_dependencyMap[3], \"../services/apiClient\");\n  // Platform-specific secure storage\n  const secureStore = {\n    getItemAsync: async key => {\n      try {\n        if (Platform.default.OS === 'web') {\n          return localStorage.getItem(key);\n        }\n        return await SecureStore.getItemAsync(key);\n      } catch {\n        return null;\n      }\n    },\n    setItemAsync: async (key, value) => {\n      try {\n        if (Platform.default.OS === 'web') {\n          localStorage.setItem(key, value);\n          return;\n        }\n        await SecureStore.setItemAsync(key, value);\n      } catch {\n        // Ignore errors\n      }\n    },\n    deleteItemAsync: async key => {\n      try {\n        if (Platform.default.OS === 'web') {\n          localStorage.removeItem(key);\n          return;\n        }\n        await SecureStore.deleteItemAsync(key);\n      } catch {\n        // Ignore errors\n      }\n    }\n  };\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    profile: null,\n    token: null,\n    isAuthenticated: false,\n    isLoading: false,\n    setUser: user => set({\n      user\n    }),\n    setProfile: profile => set({\n      profile\n    }),\n    setToken: async token => {\n      await secureStore.setItemAsync('auth_token', token);\n      set({\n        token,\n        isAuthenticated: true\n      });\n    },\n    logout: async () => {\n      await secureStore.deleteItemAsync('auth_token');\n      set({\n        user: null,\n        profile: null,\n        token: null,\n        isAuthenticated: false\n      });\n    },\n    loadUserData: async () => {\n      try {\n        set({\n          isLoading: true\n        });\n        const token = await secureStore.getItemAsync('auth_token');\n        if (!token) {\n          set({\n            isAuthenticated: false,\n            isLoading: false\n          });\n          return;\n        }\n        const response = await _servicesApiClient.apiClient.get('/me', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        set({\n          user: response.data.user,\n          profile: response.data.profile,\n          token,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        console.error('Error loading user data:', error);\n        await get().logout();\n      } finally {\n        set({\n          isLoading: false\n        });\n      }\n    },\n    setupProfile: async data => {\n      try {\n        const {\n          token\n        } = get();\n        await _servicesApiClient.apiClient.post('/profile/setup', data, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n\n        // Reload user data to get updated profile\n        await get().loadUserData();\n      } catch (error) {\n        console.error('Error setting up profile:', error);\n        throw error;\n      }\n    },\n    authenticate: async (phone, otp) => {\n      try {\n        const response = await _servicesApiClient.apiClient.post('/auth/verify', {\n          phone,\n          otp\n        });\n        const {\n          token,\n          user_id\n        } = response.data;\n        await get().setToken(token);\n        await get().loadUserData();\n        return true;\n      } catch (error) {\n        console.error('Authentication error:', error);\n        return false;\n      }\n    }\n  }));\n\n  // Initialize auth state on app start (skip on web for now)\n  const initializeAuth = async () => {\n    try {\n      if (Platform.default.OS !== 'web') {\n        const token = await secureStore.getItemAsync('auth_token');\n        if (token) {\n          useAuthStore.getState().loadUserData();\n        }\n      }\n    } catch (error) {\n      console.log('Auth initialization skipped:', error);\n    }\n  };\n  initializeAuth();\n});","lineCount":187,"map":[[27,2,79,0,"Object"],[27,8,79,0],[27,9,79,0,"defineProperty"],[27,23,79,0],[27,24,79,0,"exports"],[27,31,79,0],[28,4,79,0,"enumerable"],[28,14,79,0],[29,4,79,0,"get"],[29,7,79,0],[29,18,79,0,"get"],[29,19,79,0],[30,6,79,0],[30,13,79,0,"useAuthStore"],[30,25,79,0],[31,4,79,0],[32,2,79,0],[33,2,1,0],[33,6,1,0,"_zustand"],[33,14,1,0],[33,17,1,0,"require"],[33,24,1,0],[33,25,1,0,"_dependencyMap"],[33,39,1,0],[34,2,3,0],[34,6,3,0,"_expoSecureStore"],[34,22,3,0],[34,25,3,0,"require"],[34,32,3,0],[34,33,3,0,"_dependencyMap"],[34,47,3,0],[35,2,3,0],[35,6,3,0,"SecureStore"],[35,17,3,0],[35,20,3,0,"_interopNamespace"],[35,37,3,0],[35,38,3,0,"_expoSecureStore"],[35,54,3,0],[36,2,3,49],[36,6,3,49,"_reactNativeWebDistExportsPlatform"],[36,40,3,49],[36,43,3,49,"require"],[36,50,3,49],[36,51,3,49,"_dependencyMap"],[36,65,3,49],[37,2,3,49],[37,6,3,49,"Platform"],[37,14,3,49],[37,17,3,49,"_interopDefault"],[37,32,3,49],[37,33,3,49,"_reactNativeWebDistExportsPlatform"],[37,67,3,49],[38,2,5,0],[38,6,5,0,"_servicesApiClient"],[38,24,5,0],[38,27,5,0,"require"],[38,34,5,0],[38,35,5,0,"_dependencyMap"],[38,49,5,0],[39,2,43,0],[40,2,44,0],[40,8,44,6,"secureStore"],[40,19,44,17],[40,22,44,20],[41,4,45,2,"getItemAsync"],[41,16,45,14],[41,18,45,16],[41,24,45,23,"key"],[41,27,45,34],[41,31,45,63],[42,6,46,4],[42,10,46,8],[43,8,47,6],[43,12,47,10,"Platform"],[43,20,47,18],[43,21,47,18,"default"],[43,28,47,18],[43,29,47,19,"OS"],[43,31,47,21],[43,36,47,26],[43,41,47,31],[43,43,47,33],[44,10,48,8],[44,17,48,15,"localStorage"],[44,29,48,27],[44,30,48,28,"getItem"],[44,37,48,35],[44,38,48,36,"key"],[44,41,48,39],[44,42,48,40],[45,8,49,6],[46,8,50,6],[46,15,50,13],[46,21,50,19,"SecureStore"],[46,32,50,30],[46,33,50,31,"getItemAsync"],[46,45,50,43],[46,46,50,44,"key"],[46,49,50,47],[46,50,50,48],[47,6,51,4],[47,7,51,5],[47,8,51,6],[47,14,51,12],[48,8,52,6],[48,15,52,13],[48,19,52,17],[49,6,53,4],[50,4,54,2],[50,5,54,3],[51,4,55,2,"setItemAsync"],[51,16,55,14],[51,18,55,16],[51,24,55,16,"setItemAsync"],[51,25,55,23,"key"],[51,28,55,34],[51,30,55,36,"value"],[51,35,55,49],[51,40,55,69],[52,6,56,4],[52,10,56,8],[53,8,57,6],[53,12,57,10,"Platform"],[53,20,57,18],[53,21,57,18,"default"],[53,28,57,18],[53,29,57,19,"OS"],[53,31,57,21],[53,36,57,26],[53,41,57,31],[53,43,57,33],[54,10,58,8,"localStorage"],[54,22,58,20],[54,23,58,21,"setItem"],[54,30,58,28],[54,31,58,29,"key"],[54,34,58,32],[54,36,58,34,"value"],[54,41,58,39],[54,42,58,40],[55,10,59,8],[56,8,60,6],[57,8,61,6],[57,14,61,12,"SecureStore"],[57,25,61,23],[57,26,61,24,"setItemAsync"],[57,38,61,36],[57,39,61,37,"key"],[57,42,61,40],[57,44,61,42,"value"],[57,49,61,47],[57,50,61,48],[58,6,62,4],[58,7,62,5],[58,8,62,6],[58,14,62,12],[59,8,63,6],[60,6,63,6],[61,4,65,2],[61,5,65,3],[62,4,66,2,"deleteItemAsync"],[62,19,66,17],[62,21,66,19],[62,27,66,26,"key"],[62,30,66,37],[62,34,66,57],[63,6,67,4],[63,10,67,8],[64,8,68,6],[64,12,68,10,"Platform"],[64,20,68,18],[64,21,68,18,"default"],[64,28,68,18],[64,29,68,19,"OS"],[64,31,68,21],[64,36,68,26],[64,41,68,31],[64,43,68,33],[65,10,69,8,"localStorage"],[65,22,69,20],[65,23,69,21,"removeItem"],[65,33,69,31],[65,34,69,32,"key"],[65,37,69,35],[65,38,69,36],[66,10,70,8],[67,8,71,6],[68,8,72,6],[68,14,72,12,"SecureStore"],[68,25,72,23],[68,26,72,24,"deleteItemAsync"],[68,41,72,39],[68,42,72,40,"key"],[68,45,72,43],[68,46,72,44],[69,6,73,4],[69,7,73,5],[69,8,73,6],[69,14,73,12],[70,8,74,6],[71,6,74,6],[72,4,76,2],[73,2,77,0],[73,3,77,1],[74,2,79,7],[74,8,79,13,"useAuthStore"],[74,20,79,25],[74,23,79,28],[74,27,79,28,"create"],[74,35,79,34],[74,36,79,34,"create"],[74,42,79,34],[74,44,80,2],[74,45,80,3,"set"],[74,48,80,6],[74,50,80,8,"get"],[74,53,80,11],[74,59,80,17],[75,4,81,4,"user"],[75,8,81,8],[75,10,81,10],[75,14,81,14],[76,4,82,4,"profile"],[76,11,82,11],[76,13,82,13],[76,17,82,17],[77,4,83,4,"token"],[77,9,83,9],[77,11,83,11],[77,15,83,15],[78,4,84,4,"isAuthenticated"],[78,19,84,19],[78,21,84,21],[78,26,84,26],[79,4,85,4,"isLoading"],[79,13,85,13],[79,15,85,15],[79,20,85,20],[80,4,87,4,"setUser"],[80,11,87,11],[80,13,87,14,"user"],[80,17,87,18],[80,21,87,23,"set"],[80,24,87,26],[80,25,87,27],[81,6,87,29,"user"],[82,4,87,34],[82,5,87,35],[82,6,87,36],[83,4,89,4,"setProfile"],[83,14,89,14],[83,16,89,17,"profile"],[83,23,89,24],[83,27,89,29,"set"],[83,30,89,32],[83,31,89,33],[84,6,89,35,"profile"],[85,4,89,43],[85,5,89,44],[85,6,89,45],[86,4,91,4,"setToken"],[86,12,91,12],[86,14,91,14],[86,20,91,21,"token"],[86,25,91,26],[86,29,91,31],[87,6,92,6],[87,12,92,12,"secureStore"],[87,23,92,23],[87,24,92,24,"setItemAsync"],[87,36,92,36],[87,37,92,37],[87,49,92,49],[87,51,92,51,"token"],[87,56,92,56],[87,57,92,57],[88,6,93,6,"set"],[88,9,93,9],[88,10,93,10],[89,8,93,12,"token"],[89,13,93,17],[90,8,93,19,"isAuthenticated"],[90,23,93,34],[90,25,93,36],[91,6,93,41],[91,7,93,42],[91,8,93,43],[92,4,94,4],[92,5,94,5],[93,4,96,4,"logout"],[93,10,96,10],[93,12,96,12],[93,18,96,12,"logout"],[93,19,96,12],[93,24,96,24],[94,6,97,6],[94,12,97,12,"secureStore"],[94,23,97,23],[94,24,97,24,"deleteItemAsync"],[94,39,97,39],[94,40,97,40],[94,52,97,52],[94,53,97,53],[95,6,98,6,"set"],[95,9,98,9],[95,10,98,10],[96,8,99,8,"user"],[96,12,99,12],[96,14,99,14],[96,18,99,18],[97,8,100,8,"profile"],[97,15,100,15],[97,17,100,17],[97,21,100,21],[98,8,101,8,"token"],[98,13,101,13],[98,15,101,15],[98,19,101,19],[99,8,102,8,"isAuthenticated"],[99,23,102,23],[99,25,102,25],[100,6,103,6],[100,7,103,7],[100,8,103,8],[101,4,104,4],[101,5,104,5],[102,4,106,4,"loadUserData"],[102,16,106,16],[102,18,106,18],[102,24,106,18,"loadUserData"],[102,25,106,18],[102,30,106,30],[103,6,107,6],[103,10,107,10],[104,8,108,8,"set"],[104,11,108,11],[104,12,108,12],[105,10,108,14,"isLoading"],[105,19,108,23],[105,21,108,25],[106,8,108,30],[106,9,108,31],[106,10,108,32],[107,8,109,8],[107,14,109,14,"token"],[107,19,109,19],[107,22,109,22],[107,28,109,28,"secureStore"],[107,39,109,39],[107,40,109,40,"getItemAsync"],[107,52,109,52],[107,53,109,53],[107,65,109,65],[107,66,109,66],[108,8,111,8],[108,12,111,12],[108,13,111,13,"token"],[108,18,111,18],[108,20,111,20],[109,10,112,10,"set"],[109,13,112,13],[109,14,112,14],[110,12,112,16,"isAuthenticated"],[110,27,112,31],[110,29,112,33],[110,34,112,38],[111,12,112,40,"isLoading"],[111,21,112,49],[111,23,112,51],[112,10,112,57],[112,11,112,58],[112,12,112,59],[113,10,113,10],[114,8,114,8],[115,8,116,8],[115,14,116,14,"response"],[115,22,116,22],[115,25,116,25],[115,31,116,31,"apiClient"],[115,49,116,40],[115,50,116,40,"apiClient"],[115,59,116,40],[115,60,116,41,"get"],[115,63,116,44],[115,64,116,45],[115,69,116,50],[115,71,116,52],[116,10,117,10,"headers"],[116,17,117,17],[116,19,117,19],[117,12,117,21,"Authorization"],[117,25,117,34],[117,27,117,36],[117,37,117,46,"token"],[117,42,117,51],[118,10,117,54],[119,8,118,8],[119,9,118,9],[119,10,118,10],[120,8,120,8,"set"],[120,11,120,11],[120,12,120,12],[121,10,121,10,"user"],[121,14,121,14],[121,16,121,16,"response"],[121,24,121,24],[121,25,121,25,"data"],[121,29,121,29],[121,30,121,30,"user"],[121,34,121,34],[122,10,122,10,"profile"],[122,17,122,17],[122,19,122,19,"response"],[122,27,122,27],[122,28,122,28,"data"],[122,32,122,32],[122,33,122,33,"profile"],[122,40,122,40],[123,10,123,10,"token"],[123,15,123,15],[124,10,124,10,"isAuthenticated"],[124,25,124,25],[124,27,124,27],[125,8,125,8],[125,9,125,9],[125,10,125,10],[126,6,126,6],[126,7,126,7],[126,8,126,8],[126,15,126,15,"error"],[126,20,126,20],[126,22,126,22],[127,8,127,8,"console"],[127,15,127,15],[127,16,127,16,"error"],[127,21,127,21],[127,22,127,22],[127,48,127,48],[127,50,127,50,"error"],[127,55,127,55],[127,56,127,56],[128,8,128,8],[128,14,128,14,"get"],[128,17,128,17],[128,18,128,18],[128,19,128,19],[128,20,128,20,"logout"],[128,26,128,26],[128,27,128,27],[128,28,128,28],[129,6,129,6],[129,7,129,7],[129,16,129,16],[130,8,130,8,"set"],[130,11,130,11],[130,12,130,12],[131,10,130,14,"isLoading"],[131,19,130,23],[131,21,130,25],[132,8,130,31],[132,9,130,32],[132,10,130,33],[133,6,131,6],[134,4,132,4],[134,5,132,5],[135,4,134,4,"setupProfile"],[135,16,134,16],[135,18,134,18],[135,24,134,25,"data"],[135,28,134,29],[135,32,134,34],[136,6,135,6],[136,10,135,10],[137,8,136,8],[137,14,136,14],[138,10,136,16,"token"],[139,8,136,22],[139,9,136,23],[139,12,136,26,"get"],[139,15,136,29],[139,16,136,30],[139,17,136,31],[140,8,137,8],[140,14,137,14,"apiClient"],[140,32,137,23],[140,33,137,23,"apiClient"],[140,42,137,23],[140,43,137,24,"post"],[140,47,137,28],[140,48,137,29],[140,64,137,45],[140,66,137,47,"data"],[140,70,137,51],[140,72,137,53],[141,10,138,10,"headers"],[141,17,138,17],[141,19,138,19],[142,12,138,21,"Authorization"],[142,25,138,34],[142,27,138,36],[142,37,138,46,"token"],[142,42,138,51],[143,10,138,54],[144,8,139,8],[144,9,139,9],[144,10,139,10],[146,8,141,8],[147,8,142,8],[147,14,142,14,"get"],[147,17,142,17],[147,18,142,18],[147,19,142,19],[147,20,142,20,"loadUserData"],[147,32,142,32],[147,33,142,33],[147,34,142,34],[148,6,143,6],[148,7,143,7],[148,8,143,8],[148,15,143,15,"error"],[148,20,143,20],[148,22,143,22],[149,8,144,8,"console"],[149,15,144,15],[149,16,144,16,"error"],[149,21,144,21],[149,22,144,22],[149,49,144,49],[149,51,144,51,"error"],[149,56,144,56],[149,57,144,57],[150,8,145,8],[150,14,145,14,"error"],[150,19,145,19],[151,6,146,6],[152,4,147,4],[152,5,147,5],[153,4,149,4,"authenticate"],[153,16,149,16],[153,18,149,18],[153,24,149,18,"authenticate"],[153,25,149,25,"phone"],[153,30,149,30],[153,32,149,32,"otp"],[153,35,149,35],[153,40,149,40],[154,6,150,6],[154,10,150,10],[155,8,151,8],[155,14,151,14,"response"],[155,22,151,22],[155,25,151,25],[155,31,151,31,"apiClient"],[155,49,151,40],[155,50,151,40,"apiClient"],[155,59,151,40],[155,60,151,41,"post"],[155,64,151,45],[155,65,151,46],[155,79,151,60],[155,81,151,62],[156,10,151,64,"phone"],[156,15,151,69],[157,10,151,71,"otp"],[158,8,151,75],[158,9,151,76],[158,10,151,77],[159,8,152,8],[159,14,152,14],[160,10,152,16,"token"],[160,15,152,21],[161,10,152,23,"user_id"],[162,8,152,31],[162,9,152,32],[162,12,152,35,"response"],[162,20,152,43],[162,21,152,44,"data"],[162,25,152,48],[163,8,154,8],[163,14,154,14,"get"],[163,17,154,17],[163,18,154,18],[163,19,154,19],[163,20,154,20,"setToken"],[163,28,154,28],[163,29,154,29,"token"],[163,34,154,34],[163,35,154,35],[164,8,155,8],[164,14,155,14,"get"],[164,17,155,17],[164,18,155,18],[164,19,155,19],[164,20,155,20,"loadUserData"],[164,32,155,32],[164,33,155,33],[164,34,155,34],[165,8,157,8],[165,15,157,15],[165,19,157,19],[166,6,158,6],[166,7,158,7],[166,8,158,8],[166,15,158,15,"error"],[166,20,158,20],[166,22,158,22],[167,8,159,8,"console"],[167,15,159,15],[167,16,159,16,"error"],[167,21,159,21],[167,22,159,22],[167,45,159,45],[167,47,159,47,"error"],[167,52,159,52],[167,53,159,53],[168,8,160,8],[168,15,160,15],[168,20,160,20],[169,6,161,6],[170,4,162,4],[171,2,163,2],[171,3,163,3],[171,4,164,0],[171,5,164,1],[173,2,166,0],[174,2,167,0],[174,8,167,6,"initializeAuth"],[174,22,167,20],[174,25,167,23],[174,31,167,23,"initializeAuth"],[174,32,167,23],[174,37,167,35],[175,4,168,2],[175,8,168,6],[176,6,169,4],[176,10,169,8,"Platform"],[176,18,169,16],[176,19,169,16,"default"],[176,26,169,16],[176,27,169,17,"OS"],[176,29,169,19],[176,34,169,24],[176,39,169,29],[176,41,169,31],[177,8,170,6],[177,14,170,12,"token"],[177,19,170,17],[177,22,170,20],[177,28,170,26,"secureStore"],[177,39,170,37],[177,40,170,38,"getItemAsync"],[177,52,170,50],[177,53,170,51],[177,65,170,63],[177,66,170,64],[178,8,171,6],[178,12,171,10,"token"],[178,17,171,15],[178,19,171,17],[179,10,172,8,"useAuthStore"],[179,22,172,20],[179,23,172,21,"getState"],[179,31,172,29],[179,32,172,30],[179,33,172,31],[179,34,172,32,"loadUserData"],[179,46,172,44],[179,47,172,45],[179,48,172,46],[180,8,173,6],[181,6,174,4],[182,4,175,2],[182,5,175,3],[182,6,175,4],[182,13,175,11,"error"],[182,18,175,16],[182,20,175,18],[183,6,176,4,"console"],[183,13,176,11],[183,14,176,12,"log"],[183,17,176,15],[183,18,176,16],[183,48,176,46],[183,50,176,48,"error"],[183,55,176,53],[183,56,176,54],[184,4,177,2],[185,2,178,0],[185,3,178,1],[186,2,180,0,"initializeAuth"],[186,16,180,14],[186,17,180,15],[186,18,180,16],[187,0,180,17],[187,3]],"functionMap":{"names":["<global>","secureStore.getItemAsync","secureStore.setItemAsync","secureStore.deleteItemAsync","create$argument_0","setUser","setProfile","setToken","logout","loadUserData","setupProfile","authenticate","initializeAuth"],"mappings":"AAA;gBC4C;GDS;gBEC;GFU;mBGC;GHU;EII;aCO,uBD;gBEE,6BF;cGE;KHG;YIE;KJQ;kBKE;KL0B;kBME;KNa;kBOE;KPa;IJC;uBYI;CZW"},"hasCjsExports":false},"type":"js/module"}]}